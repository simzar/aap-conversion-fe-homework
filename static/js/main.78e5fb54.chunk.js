(this["webpackJsonpaap-conversion-homework"]=this["webpackJsonpaap-conversion-homework"]||[]).push([[0],{148:function(e,t,r){},149:function(e){e.exports=JSON.parse('{"translations":{"column.name":"Name","column.startDate":"Start Date","column.endDate":"End Date","column.budget":"Budget","column.userName":"User Name","column.isActive":"Is Active","isActive.value.yes":"Active","isActive.value.no":"Inactive","endDate.disabled.placeholder":"Select Start Date","users.fetchError":"An error occurred. Please try loading data again","users.loading":"Loading...","users.unknownUser":"Unknown user","campaigns.noData":"Please load the campaigns","campaigns.noFilteredData":"No data matches the search criteria"},"locale":"en","formats":{}}')},157:function(e,t,r){e.exports=r(341)},162:function(e,t,r){},167:function(e,t,r){},211:function(e,t,r){},212:function(e,t,r){},341:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),c=r(36),o=r.n(c),s=(r(162),r(74)),i=r(5),u=r.n(i),l=r(346),p=r(148),d=r.n(p),f=r(149),m=r(12),b=r(73),v=r(37),g=r(38),O=r(44),h=r(39),j=r(29),y=r(45),D=r(150),w=r(152),E=r.n(w),P=r(156),C=(r(167),function(e){var t=e.columns,r=e.data,a=e.isLoading,c=e.isError,o=e.loadingText,s=e.noDataText;return n.a.createElement(P.a,{className:"-striped -highlight",data:c||r,resolveData:r?function(){return r}:[],columns:t,filterable:!0,sortable:!1,resizable:!1,defaultPageSize:10,pageSizeOptions:[5,10,20,50,100],loading:a||c,loadingText:o,noDataText:s,showPagination:r.length>10})}),S=r(153),k=r.n(S),x=(r(211),function(e){var t=e.disabled,r=e.minDate,a=e.placeholder,c=e.startDate,o=e.setDate;return n.a.createElement(k.a,{disabled:t,minDate:r,placeholderText:a,selected:c,onChange:function(e){return o(e)},isClearable:!0})});x.defaultProps={disabled:!1,minDate:void 0,startDate:void 0};var T=x,A=r(345),F=(r(212),function(e){var t=e.isActive,r=e.labelTrue,a=e.labelFalse,c=t?r:a,o=t?"active":"inactive";return n.a.createElement("div",{className:"label label--".concat(o)},n.a.createElement(A.a,{id:c}))});function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}var N=function(e){function t(e){var r;return Object(v.a)(this,t),(r=Object(O.a)(this,Object(h.a)(t).call(this,e))).addCampaigns=r.addCampaigns.bind(Object(j.a)(r)),r.mapCampaigns=r.mapCampaigns.bind(Object(j.a)(r)),r.constructColumns=r.constructColumns.bind(Object(j.a)(r)),r.selectStartDate=r.selectStartDate.bind(Object(j.a)(r)),r.state={startDate:null},r}return Object(y.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){window.AddCampaigns=this.addCampaigns}},{key:"componentWillUnmount",value:function(){window.AddCampaigns=null}},{key:"addCampaigns",value:function(e){var t=this.props,r=t.loadCampaigns,a=t.fetchUsers,n=t.users;Object.entries(n).length>0||a(),r(e)}},{key:"mapCampaigns",value:function(){var e=this.props,t=e.campaigns,r=e.users,a=e.intl.formatMessage,n=Date.now();return t.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(r,!0).forEach((function(t){Object(m.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{userName:e.userId in r?r[e.userId]:a({id:"users.unknownUser"}),isActive:n>=new Date(e.startDate)&&n<=new Date(e.endDate)})}))}},{key:"constructColumns",value:function(){var e=this,t=this.props,r=t.intl.formatMessage,a=t.campaigns,c=this.state.startDate;return[{Header:r({id:"column.name"}),accessor:"name",filterMethod:function(e,t){return Object(D.a)(t,e.value,{keys:["name"]})},filterAll:!0},{Header:r({id:"column.userName"}),accessor:"userName",filterable:!1},{Header:r({id:"column.startDate"}),accessor:"startDate",Filter:function(t){var c=t.filter,o=t.onChange;return n.a.createElement(T,{startDate:c?c.value:void 0,disabled:0===a.length,setDate:function(t){return e.selectStartDate(o,t)},placeholder:r({id:"column.startDate"})})},filterMethod:function(e,t){return!e||!e.value||new Date(t.startDate)>=e.value}},{Header:r({id:"column.endDate"}),accessor:"endDate",Filter:function(e){var t=e.filter,a=e.onChange;return n.a.createElement(T,{startDate:t?t.value:void 0,setDate:a,minDate:c,disabled:null===c,placeholder:r({id:null===c?"endDate.disabled.placeholder":"column.endDate"})})},filterMethod:function(e,t){return!e||!e.value||new Date(t.endDate)<=e.value}},{Header:r({id:"column.isActive"}),accessor:"isActive",filterable:!1,Cell:function(e){return F({isActive:e.value,labelTrue:"isActive.value.yes",labelFalse:"isActive.value.no"})}},{Header:r({id:"column.budget"}),accessor:"budget",filterable:!1,Cell:function(e){return E()(e.value).format("($ 0.00 a)")}}]}},{key:"selectStartDate",value:function(e,t){this.setState({startDate:t},(function(){return e(t)}))}},{key:"render",value:function(){var e=this.props,t=e.isLoading,r=e.isError,a=e.intl.formatMessage,c=e.campaigns,o=this.mapCampaigns(),s=this.constructColumns(),i=a({id:r?"users.fetchError":"users.loading"}),u=a({id:0===c.length?"campaigns.noData":"campaigns.noFilteredData"});return n.a.createElement(C,{columns:s,data:o,isLoading:t,isError:r,loadingText:i,noDataText:u})}}]),t}(a.Component),U=r(20),M=r.n(U),q=r(43),I={get:function(){var e=Object(q.a)(M.a.mark((function e(t){var r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return r=e.sent,e.abrupt("return",r.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},L={fetchUsers:function(){return I.get("https://jsonplaceholder.typicode.com/users")}};function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(r,!0).forEach((function(t){Object(m.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var z=function(e){return{type:"@users/FETCH_SUCCESS",payload:e}},B=r(22),J=Object(B.object)({id:Object(B.number)().required(),name:Object(B.string)().required(),startDate:Object(B.date)().required(),endDate:Object(B.date)().required(),budget:Object(B.number)().required(),userId:Object(B.number)().required()}),W=function(e){return{type:"@campaigns/SET",payload:e}};function $(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}var G={fetchUsers:function(){return function(){var e=Object(q.a)(M.a.mark((function e(t){var r,a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"@users/FETCH"}),e.prev=1,e.next=4,L.fetchUsers();case 4:r=e.sent,a=r.reduce((function(e,t){var r=t.id,a=t.name;return _({},e,Object(m.a)({},r,a))}),{}),t(z(a)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t({type:"@users/FETCH_ERROR"});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},loadCampaigns:function(e){return function(){var t=Object(q.a)(M.a.mark((function t(r){var a;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=e.map((function(e){return J.validate(e)})),t.next=4,Promise.all(a);case 4:r(W(e)),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0.message),t.t0.value?console.error("Campaign that failed validation: ",t.t0.value):console.error("Please provide a valid array of campaigns");case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}},K=Object(s.b)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$(r,!0).forEach((function(t){Object(m.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({campaigns:e.campaigns.campaigns},e.users)}),G)(Object(b.c)(N)),Q=u.a.bind(d.a);var V=function(){var e=f.translations;return n.a.createElement(l.a,{locale:"en",messages:e},n.a.createElement("div",{className:Q("app")},n.a.createElement(K,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var X=r(155),Y=r(27),Z=r(48),ee={campaigns:[]},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"@campaigns/SET":return{campaigns:[].concat(Object(Z.a)(e.campaigns),Object(Z.a)(t.payload))};default:return e}};function re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?re(r,!0).forEach((function(t){Object(m.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):re(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ne={users:{},isLoading:!1,isError:!1},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"@users/FETCH":return ae({},ne,{isLoading:!0});case"@users/FETCH_SUCCESS":return ae({},ne,{users:t.payload});case"@users/FETCH_ERROR":return ae({},ne,{isError:!0});default:return e}},oe=Object(Y.c)({campaigns:te,users:ce}),se=Object(Y.d)(oe,Object(Y.a)(X.a));o.a.render(n.a.createElement(s.a,{store:se},n.a.createElement(V,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[157,1,2]]]);
//# sourceMappingURL=main.78e5fb54.chunk.js.map