(this["webpackJsonpaap-conversion-homework"]=this["webpackJsonpaap-conversion-homework"]||[]).push([[0],{148:function(e){e.exports=JSON.parse('{"translations":{"column.name":"Name","column.startDate":"Start Date","column.endDate":"End Date","column.budget":"Budget","column.userName":"User Name","column.isActive":"Is Active","isActive.value.yes":"Active","isActive.value.no":"Inactive","endDate.disabled.placeholder":"Select Start Date","users.fetchError":"An error occurred. Please try loading data again","users.loading":"Loading...","users.unknownUser":"Unknown user","campaigns.noData":"Please load the campaigns","campaigns.noFilteredData":"No data matches the search criteria"},"locale":"en","formats":{}}')},156:function(e,t,r){e.exports=r(341)},161:function(e,t,r){},166:function(e,t,r){},210:function(e,t,r){},211:function(e,t,r){},340:function(e,t,r){},341:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),c=r(36),o=r.n(c),s=(r(161),r(74)),i=r(346),u=r(148),l=r(12),p=r(73),d=r(37),f=r(38),m=r(44),b=r(39),v=r(29),g=r(45),O=r(149),h=r(151),j=r.n(h),y=r(155),D=(r(166),function(e){var t=e.columns,r=e.data,a=e.isLoading,c=e.isError,o=e.loadingText,s=e.noDataText;return n.a.createElement(y.a,{className:"-striped -highlight",data:c||r,resolveData:r?function(){return r}:[],columns:t,filterable:!0,sortable:!1,resizable:!1,defaultPageSize:10,pageSizeOptions:[5,10,20,50,100],loading:a||c,loadingText:o,noDataText:s,showPagination:r.length>10})}),w=r(152),E=r.n(w),P=(r(210),function(e){var t=e.disabled,r=e.minDate,a=e.placeholder,c=e.startDate,o=e.setDate;return n.a.createElement(E.a,{disabled:t,minDate:r,placeholderText:a,selected:c,onChange:function(e){return o(e)},isClearable:!0})});P.defaultProps={disabled:!1,minDate:void 0,startDate:void 0};var C=P,S=r(345),k=(r(211),function(e){var t=e.isActive,r=e.labelTrue,a=e.labelFalse,c=t?r:a,o=t?"active":"inactive";return n.a.createElement("div",{className:"label label--".concat(o)},n.a.createElement(S.a,{id:c}))});function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}var T=function(e){function t(e){var r;return Object(d.a)(this,t),(r=Object(m.a)(this,Object(b.a)(t).call(this,e))).addCampaigns=r.addCampaigns.bind(Object(v.a)(r)),r.mapCampaigns=r.mapCampaigns.bind(Object(v.a)(r)),r.constructColumns=r.constructColumns.bind(Object(v.a)(r)),r.selectStartDate=r.selectStartDate.bind(Object(v.a)(r)),r.state={startDate:null},r}return Object(g.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){window.AddCampaigns=this.addCampaigns}},{key:"componentWillUnmount",value:function(){window.AddCampaigns=null}},{key:"addCampaigns",value:function(e){var t=this.props,r=t.loadCampaigns,a=t.fetchUsers,n=t.users;Object.entries(n).length>0||a(),r(e)}},{key:"mapCampaigns",value:function(){var e=this.props,t=e.campaigns,r=e.users,a=e.intl.formatMessage,n=Date.now();return t.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(r,!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{userName:e.userId in r?r[e.userId]:a({id:"users.unknownUser"}),isActive:n>=new Date(e.startDate)&&n<=new Date(e.endDate)})}))}},{key:"constructColumns",value:function(){var e=this,t=this.props,r=t.intl.formatMessage,a=t.campaigns,c=this.state.startDate;return[{Header:r({id:"column.name"}),accessor:"name",filterMethod:function(e,t){return Object(O.a)(t,e.value,{keys:["name"]})},filterAll:!0},{Header:r({id:"column.userName"}),accessor:"userName",filterable:!1},{Header:r({id:"column.startDate"}),accessor:"startDate",Filter:function(t){var c=t.filter,o=t.onChange;return n.a.createElement(C,{startDate:c?c.value:void 0,disabled:0===a.length,setDate:function(t){return e.selectStartDate(o,t)},placeholder:r({id:"column.startDate"})})},filterMethod:function(e,t){return!e||!e.value||new Date(t.startDate)>=e.value}},{Header:r({id:"column.endDate"}),accessor:"endDate",Filter:function(e){var t=e.filter,a=e.onChange;return n.a.createElement(C,{startDate:t?t.value:void 0,setDate:a,minDate:c,disabled:null===c,placeholder:r({id:null===c?"endDate.disabled.placeholder":"column.endDate"})})},filterMethod:function(e,t){return!e||!e.value||new Date(t.endDate)<=e.value}},{Header:r({id:"column.isActive"}),accessor:"isActive",filterable:!1,Cell:function(e){return k({isActive:e.value,labelTrue:"isActive.value.yes",labelFalse:"isActive.value.no"})}},{Header:r({id:"column.budget"}),accessor:"budget",filterable:!1,Cell:function(e){return j()(e.value).format("($ 0.00 a)")}}]}},{key:"selectStartDate",value:function(e,t){this.setState({startDate:t},(function(){return e(t)}))}},{key:"render",value:function(){var e=this.props,t=e.isLoading,r=e.isError,a=e.intl.formatMessage,c=e.campaigns,o=this.mapCampaigns(),s=this.constructColumns(),i=a({id:r?"users.fetchError":"users.loading"}),u=a({id:0===c.length?"campaigns.noData":"campaigns.noFilteredData"});return n.a.createElement(D,{columns:s,data:o,isLoading:t,isError:r,loadingText:i,noDataText:u})}}]),t}(a.Component),A=r(20),F=r.n(A),H=r(43),N={get:function(){var e=Object(H.a)(F.a.mark((function e(t){var r;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return r=e.sent,e.abrupt("return",r.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},U={fetchUsers:function(){return N.get("https://jsonplaceholder.typicode.com/users")}};function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(r,!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var I=function(e){return{type:"@users/FETCH_SUCCESS",payload:e}},L=r(22),R=Object(L.object)({id:Object(L.number)().required(),name:Object(L.string)().required(),startDate:Object(L.date)().required(),endDate:Object(L.date)().required(),budget:Object(L.number)().required(),userId:Object(L.number)().required()}),_=function(e){return{type:"@campaigns/SET",payload:e}};function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}var B={fetchUsers:function(){return function(){var e=Object(H.a)(F.a.mark((function e(t){var r,a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"@users/FETCH"}),e.prev=1,e.next=4,U.fetchUsers();case 4:r=e.sent,a=r.reduce((function(e,t){var r=t.id,a=t.name;return q({},e,Object(l.a)({},r,a))}),{}),t(I(a)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t({type:"@users/FETCH_ERROR"});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},loadCampaigns:function(e){return function(){var t=Object(H.a)(F.a.mark((function t(r){var a,n;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=e.map((function(e){return R.validate(e)})),t.next=4,Promise.all(a);case 4:n=e.filter((function(e){return new Date(e.startDate)<=new Date(e.endDate)})),r(_(n)),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0.message),t.t0.value?console.error("Campaign that failed validation: ",t.t0.value):console.error("Please provide a valid array of campaigns");case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}},J=Object(s.b)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(r,!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({campaigns:e.campaigns.campaigns},e.users)}),B)(Object(p.c)(T));r(340);var W=function(){var e=u.translations;return n.a.createElement(i.a,{locale:"en",messages:e},n.a.createElement("div",{className:"app"},n.a.createElement(J,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var $=r(154),G=r(27),K=r(48),Q={campaigns:[]},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"@campaigns/SET":return{campaigns:[].concat(Object(K.a)(e.campaigns),Object(K.a)(t.payload))};default:return e}};function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(r,!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Z={users:{},isLoading:!1,isError:!1},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"@users/FETCH":return Y({},Z,{isLoading:!0});case"@users/FETCH_SUCCESS":return Y({},Z,{users:t.payload});case"@users/FETCH_ERROR":return Y({},Z,{isError:!0});default:return e}},te=Object(G.c)({campaigns:V,users:ee}),re=Object(G.d)(te,Object(G.a)($.a));o.a.render(n.a.createElement(s.a,{store:re},n.a.createElement(W,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[156,1,2]]]);
//# sourceMappingURL=main.d3c1ec40.chunk.js.map